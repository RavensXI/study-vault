<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyVault â€” Responsive Preview</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #1a1a1a;
      color: #e0e0e0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .toolbar {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.6rem 1.25rem;
      background: #252525;
      border-bottom: 1px solid #333;
      flex-wrap: wrap;
      flex-shrink: 0;
    }

    .toolbar-title {
      font-weight: 700;
      font-size: 0.85rem;
      color: #c44536;
      margin-right: 0.5rem;
    }

    .separator {
      width: 1px;
      height: 22px;
      background: #444;
    }

    .device-btn {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.4rem 0.75rem;
      border: 1px solid #444;
      border-radius: 6px;
      background: transparent;
      color: #ccc;
      font-family: inherit;
      font-size: 0.78rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .device-btn:hover {
      border-color: #888;
      color: #fff;
    }

    .device-btn.active {
      background: #c44536;
      border-color: #c44536;
      color: #fff;
    }

    .device-btn .size-label {
      color: #888;
      font-size: 0.7rem;
    }

    .device-btn.active .size-label {
      color: rgba(255,255,255,0.7);
    }

    .custom-group {
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .custom-group input {
      width: 60px;
      padding: 0.35rem 0.5rem;
      border: 1px solid #444;
      border-radius: 5px;
      background: #1a1a1a;
      color: #e0e0e0;
      font-family: inherit;
      font-size: 0.78rem;
      text-align: center;
    }

    .custom-group input:focus {
      outline: none;
      border-color: #c44536;
    }

    .custom-group span {
      font-size: 0.75rem;
      color: #888;
    }

    .page-input-group {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      margin-left: auto;
    }

    .page-input-group label {
      font-size: 0.78rem;
      color: #888;
    }

    .page-input-group input {
      width: 260px;
      padding: 0.35rem 0.5rem;
      border: 1px solid #444;
      border-radius: 5px;
      background: #1a1a1a;
      color: #e0e0e0;
      font-family: inherit;
      font-size: 0.78rem;
    }

    .page-input-group input:focus {
      outline: none;
      border-color: #c44536;
    }

    .page-input-group button {
      padding: 0.35rem 0.65rem;
      border: 1px solid #444;
      border-radius: 5px;
      background: #333;
      color: #ccc;
      font-family: inherit;
      font-size: 0.78rem;
      cursor: pointer;
    }

    .page-input-group button:hover {
      background: #444;
      color: #fff;
    }

    .viewport {
      flex: 1;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 1.5rem;
      overflow: auto;
    }

    .frame-wrapper {
      position: relative;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 40px rgba(0,0,0,0.4);
      overflow: hidden;
      transition: width 0.3s ease, height 0.3s ease;
    }

    .frame-wrapper iframe {
      display: block;
      width: 100%;
      height: 100%;
      border: none;
    }

    .size-indicator {
      position: absolute;
      bottom: -28px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.72rem;
      color: #666;
      white-space: nowrap;
    }

    /* Rotate indicator */
    .rotate-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      border: 1px solid #444;
      border-radius: 6px;
      background: transparent;
      color: #ccc;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.15s ease;
    }

    .rotate-btn:hover {
      border-color: #888;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <span class="toolbar-title">StudyVault Preview</span>
    <span class="separator"></span>

    <button class="device-btn" data-w="375" data-h="812">
      iPhone SE <span class="size-label">375</span>
    </button>
    <button class="device-btn" data-w="390" data-h="844">
      iPhone 14 <span class="size-label">390</span>
    </button>
    <button class="device-btn" data-w="768" data-h="1024">
      iPad <span class="size-label">768</span>
    </button>
    <button class="device-btn" data-w="1024" data-h="768">
      iPad Landscape <span class="size-label">1024</span>
    </button>
    <button class="device-btn active" data-w="1280" data-h="800">
      Laptop <span class="size-label">1280</span>
    </button>
    <button class="device-btn" data-w="1920" data-h="1080">
      Desktop <span class="size-label">1920</span>
    </button>

    <span class="separator"></span>

    <div class="custom-group">
      <input type="number" id="custom-w" placeholder="W" min="280" max="2560">
      <span>&times;</span>
      <input type="number" id="custom-h" placeholder="H" min="400" max="2000">
    </div>

    <button class="rotate-btn" id="rotate-btn" title="Rotate">&#8635;</button>

    <div class="page-input-group">
      <label>Page:</label>
      <input type="text" id="page-url" value="conflict-tension/lesson-01.html">
      <button id="page-go">Go</button>
    </div>
  </div>

  <div class="viewport">
    <div class="frame-wrapper" id="frame-wrapper">
      <iframe id="preview-frame" src="conflict-tension/lesson-01.html"></iframe>
      <div class="size-indicator" id="size-indicator"></div>
    </div>
  </div>

  <script>
    const wrapper = document.getElementById('frame-wrapper');
    const frame = document.getElementById('preview-frame');
    const indicator = document.getElementById('size-indicator');
    const btns = document.querySelectorAll('.device-btn');
    const customW = document.getElementById('custom-w');
    const customH = document.getElementById('custom-h');
    const rotateBtn = document.getElementById('rotate-btn');
    const pageUrl = document.getElementById('page-url');
    const pageGo = document.getElementById('page-go');

    let currentW = 1280;
    let currentH = 800;

    function setSize(w, h) {
      currentW = w;
      currentH = h;

      // Fit within viewport
      const vp = document.querySelector('.viewport');
      const maxW = vp.clientWidth - 48;
      const maxH = vp.clientHeight - 60;
      const scale = Math.min(1, maxW / w, maxH / h);

      wrapper.style.width = w + 'px';
      wrapper.style.height = h + 'px';
      wrapper.style.transform = scale < 1 ? 'scale(' + scale + ')' : 'none';
      wrapper.style.transformOrigin = 'top center';

      indicator.textContent = w + ' \u00d7 ' + h + (scale < 1 ? ' (scaled to ' + Math.round(scale * 100) + '%)' : '');

      customW.value = w;
      customH.value = h;
    }

    btns.forEach(btn => {
      btn.addEventListener('click', () => {
        btns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        setSize(parseInt(btn.dataset.w), parseInt(btn.dataset.h));
      });
    });

    // Custom size
    function applyCustom() {
      const w = parseInt(customW.value);
      const h = parseInt(customH.value);
      if (w && h) {
        btns.forEach(b => b.classList.remove('active'));
        setSize(w, h);
      }
    }

    customW.addEventListener('change', applyCustom);
    customH.addEventListener('change', applyCustom);

    // Rotate
    rotateBtn.addEventListener('click', () => {
      btns.forEach(b => b.classList.remove('active'));
      setSize(currentH, currentW);
    });

    // Page navigation
    function loadPage() {
      frame.src = pageUrl.value;
    }

    pageGo.addEventListener('click', loadPage);
    pageUrl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') loadPage();
    });

    // Initial size
    setSize(1280, 800);
  </script>
</body>
</html>
